<!DOCTYPE html>

<html lang="en">
    <head>
    <meta charset="utf-8">
    <!--
        hexo-theme-suka © SukkaW
        GitHub: https://github.com/SukkaW/hexo-theme-suka
    -->

    <!-- ### Resource Hint ### -->

    <!-- ## DNS Prefetch ## -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

<!-- busuanzi -->

    <link rel="dns-prefetch" href="//busuanzi.ibruce.info">


<!-- comment -->







<!-- analytics -->







    <!-- ## Preload ## -->
    
    <!-- Busuanzi -->
    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" as="script">







    <!-- ### Meta & Title & Info ### -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <meta name="renderer" content="webkit">

    <!-- Title -->
    <title>Paint in VR | Fergus Fettes</title>

    <!-- Favicons -->
    <link rel="icon" type="image&#x2F;ico" href="/img/suka-favicon.ico">

    <!-- ### Import File ### -->
    <link rel="stylesheet" href="/lib/spectre/spectre.min.css"><style>
    body {
        background-color: #f8f9fa;
    }

    a, a:visited {
        color: #0070ff;
    }

    a:active, a:focus, a:hover {
        color: #0070ff;
        opacity: .75;
    }

    #post-content a,
    #post-content a:hover,
    #post-content a:focus,
    #post-content a:visited {
        color: #005eb9;
        opacity: 1;
    }

    

    .post-entry .card-body a {
        color: #0070ff;
    }

    .avatar {
        background: #444;
    }

    .navbar-link,
    .navbar-link:visited,
    .timeline .timeline-item .timeline-icon.icon-lg {
        color: #0070ff;
    }

    .navbar-link:hover {
        color: #0070ff;
        opacity: .8;
    }

    #search-input .btn,
    #disqus_click_btn,
    #disqus-switch-to-direct,
    #disqus-loadmore-button {
        background: #727e96;
        border-color: #727e96;
        color: #fff;
    }

    #post-toc a.post-toc-link,
    #post-toc a.post-toc-link:visited,
    .share-menu.menu .menu-item>a {
        color: #727e96;
    }

    .share-menu.menu .menu-item>a:hover,
    .share-menu.menu .menu-item>a:focus,
    .share-menu.menu .menu-item>a:visited {
        color: #50596c;
        background: #f8f9fa;
        opacity: .85;
    }
</style><link rel="stylesheet" href="/css/style.min.css">








    <!-- Prettify Theme -->
    
    <link rel="preload" href="/css/highlight/github.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/css/highlight/github.min.css"></noscript>





<script>
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(t){"use strict";t.loadCSS||(t.loadCSS=function(){});var e=loadCSS.relpreload={};if(e.support=function(){var e;try{e=t.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),e.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout(function(){t.rel="stylesheet",t.media="only x"}),setTimeout(a,3e3)},e.poly=function(){if(!e.support())for(var a=t.document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n];"preload"!==o.rel||"style"!==o.getAttribute("as")||o.getAttribute("data-loadcss")||(o.setAttribute("data-loadcss",!0),e.bindMediaToggle(o))}},!e.support()){e.poly();var a=t.setInterval(e.poly,500);t.addEventListener?t.addEventListener("load",function(){e.poly(),t.clearInterval(a)}):t.attachEvent&&t.attachEvent("onload",function(){e.poly(),t.clearInterval(a)})}"undefined"!=typeof exports?exports.loadCSS=loadCSS:t.loadCSS=loadCSS}("undefined"!=typeof global?global:this);
</script>

    <!-- ### Site Verification ### -->
    


    <meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Fergus Fettes"><meta name="msapplication-starturl" content="http://www.fergusfettes.com"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Fergus Fettes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- ### The Open Graph & Twitter Card Protocol ### -->
    <meta property="og:title" content="Paint in VR | Fergus Fettes"><meta property="og:site_name" content="Fergus Fettes"><meta property="og:type" content="article"><meta property="og:url" content="http://www.fergusfettes.com/2021/02/06/oculus-paint/"><meta property="og:locale" content="en"><meta name="description" content="BackgroundI bought myself a VR headset. My justification was some trailers for ‘Infinite Office’, and my love of portability– if it is true that you can have 5x screens from one laptop strapped to you - Fergus Fettes - Fergus Fettes"><meta property="article:published_time" content="2021-02-06T22:10:29.000Z"><meta property="article:modified_time" content="2022-10-15T22:17:08.288Z"><meta property="og:updated_time" content="2022-10-15T22:17:08.288Z"><meta property="article:author" content="Fergus Fettes"><meta name="twitter:card" content="summary">

    

    <!-- ### Canonical link ### -->
    <link rel="canonical" href="http://www.fergusfettes.com/2021/02/06/oculus-paint/">

    <meta name="generator" content="Hexo 6.3.0">

    <!-- ### Analytics ### -->
    







    <!-- ### Structured Data ### -->
    



<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "http://www.fergusfettes.com/2021/02/06/oculus-paint/",
    "@type": "BlogPosting",
    "logo": "http://www.fergusfettes.com/img/suka-favicon.ico",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://www.fergusfettes.com/2021/02/06/oculus-paint/"
    },
    "headline": "Paint in VR | Fergus Fettes",
    
    "image": {
        "@type": "ImageObject",
        "url": "http://www.fergusfettes.com/img/suka-favicon.ico"
    },
    
    "datePublished": "2021-02-06T22:10:29.000Z",
    "dateModified": "2022-10-15T22:17:08.288Z",
    "author": {
        "@type": "Person",
        "name": "Fergus Fettes",
        "image": {
            "@type": "ImageObject",
            "url": "http://www.fergusfettes.com/img/default_avatar.png"
        },
        "description": "Hi, nice to meet you."
    },
    "publisher": {
        "@type": "Organization",
        "name": "Fergus Fettes",
        "logo": {
            "@type": "ImageObject",
            "url": "http://www.fergusfettes.com/img/suka-favicon.ico"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "http://www.fergusfettes.com/search?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "",
    "description": "BackgroundI bought myself a VR headset. My justification was some trailers for ‘Infinite Office’, and my love of portability– if it is true that you can have 5x screens from one laptop strapped to you - Fergus Fettes - Fergus Fettes"
}
</script>



    <!-- ### Custom Head ### -->
    
</head>

    <body>
            

            <!-- ### Main content ### -->
            <!-- ## Header ##-->
<header>
    <h1 class="header-title text-center"><a href="/">Fergus Fettes</a></h1>

    <p class="text-center header-slogan">
        
            
                Hi, nice to meet you.
            
        
    </p>

    <nav class="navbar-section text-center">
    
        <a href="/" class="navbar-link">Home</a>
    
    
        <a href="/archives/" class="navbar-link">Archives</a>
    
    
        <a href="/search" class="navbar-link">Search</a>
    
    
    
        <div class="dropdown dropdown-right">
    <a class="navbar-link dropdown-toggle" tabindex="0">Share</a>
    <ul class="menu share-menu">

        <!-- Share Weibo -->
        
        <li class="menu-item">
            <a href="http://service.weibo.com/share/share.php?appkey=&title=Fergus Fettes&url=http://www.fergusfettes.com&pic=http://www.fergusfettes.com/img/suka-favicon.ico&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">Share to Weibo</a>
        </li>
        

        <!-- Share Twitter -->
        
        <li class="menu-item">
            <a href="https://twitter.com/intent/tweet?text=Fergus Fettes&url=http://www.fergusfettes.com&via=Fergus Fettes" target="_blank" rel="external noopener noreferrer nofollow">Share to Twitter</a>
        </li>
        

        <!-- Share Facebook -->
        
        <li class="menu-item">
            <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.fergusfettes.com" target="_blank" rel="external noopener noreferrer nofollow">Share to Facebook</a>
        </li>
        

        <!-- Share Google+ -->
        
        <li class="menu-item">
            <a href="https://plus.google.com/share?url=http://www.fergusfettes.com" target="_blank" rel="external noopener noreferrer nofollow">Share to Google+</a>
        </li>
        

        <!-- Share LinkedIn -->
        
        <li class="menu-item">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://www.fergusfettes.com&title=Paint in VR" target="_blank" rel="external noopener noreferrer nofollow">Share to LinkedIn</a>
        </li>
        

        <!-- Share QQ -->
        
        <li class="menu-item">
            <a href="http://connect.qq.com/widget/shareqq/index.html?site=Fergus Fettes&title=Paint in VR&summary=&pics=http://www.fergusfettes.com/img/suka-favicon.ico&url=http://www.fergusfettes.com" target="_blank" rel="external noopener noreferrer nofollow"> Share to QQ</a>
        </li>
        

        <!-- Share Telegram -->
        
        <li class="menu-item">
            <a href="https://t.me/share/url?url=http://www.fergusfettes.com&text=Paint in VR" target="_blank" rel="external noopener noreferrer nofollow">Share to Telegram</a>
        </li>
        

        <!-- QRCode -->
        
        <li class="menu-item">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB7UlEQVR42u2awY7DMAhE8/8/vT2tlEaGGdxdydDnS6Q6Nc8SAXvg+jlwXEABBRRQC6grGb/z9+fbIre55/zzN2UHqFlQS6d7LBgZX81n76R2gBoFFTn4apEV8Go++mAiO0B9B1TmuE7wBAqoKBFniTQKnFkABmo+lJNks0OgeyD8k1MCUMdDVS4Onzz/7TYD1FFQUnRYBElnQ9kl4mPVBaijoSKjFcd3Lg+hczsRHahWUFFSrSbjaGOuyAbULKhqQq0Yd0QRoOZBrZx7JzErUV8KcECNgHIFDMfplQCSbRqoOVCO8OWIYZlxV/AAah5UtTCdJdeK+AHULKgoeLoGVOFxtYntiA5UK6hKwHMKi05RUzo6UG2hskuBStSOcOYkfqDmQLkO7zQCugGzrLoA1QpKiWGZ+JGJFjvNg0DNglKLVgTWzNnTDwCoMVDKaeXhzLxsqP8ANQPKCYyZ0JG9r5wdqO+CqlwOKhAlcR+ollBuY2BF7C85t+peBKodlCPyOyKFapiwkjRQI6Ccxi3VeKOC7la1HajWUI6Du8JqVaC1OmKBagmlErMrqLkHPVvgAGoclCogOs0S28ETqLFQjviaHeLcxh2gZkG5TqqKluo9uwgJVGsolTSdYpBKzOVDHlBtoU4aQAEFFFC38QLvJ19u1hhUAgAAAABJRU5ErkJggg==" alr="QRCode">
        </li>
        

    </ul>
</div>
    
    
</nav>
</header>

            
    <!-- ## Post ## -->
    <div class="post-container">
    <div id="post-card" class="card">
        
        <div class="card-item-container">
            <div class="card-inner-cell">
                <!-- # Post Header Info # -->
                <div class="card-header">
                    
    <h1 class="card-title h3 mb-2">Paint in VR</h1>




<div class="post-header-info">
    <p class="post-header-info-left text-gray">
        <img class="author-thumb lazyload" data-src="/img/default_avatar.png" src="/img/suka-lazyload.gif" alt="Fergus Fettes's Avatar">
        <span>2021-02-06</span>
        
        
            <!-- Busuanzi Post Views -->
<span id="busuanzi_container_page_pv" hidden>
    <span class="suka-devide-dot"></span>
    <span></span>
    <span id="busuanzi_value_page_pv"></span>
    <span>Views</span>
</span>
        
        
    </p>
    <div class="post-header-info-right">
        
            <div class="dropdown dropdown-right">
<a class="dropdown-toggle" tabindex="0">Share the post</a>
<ul class="menu share-menu">
    <!-- Share Weibo -->
    
    <li class="menu-item">
        <a href="http://service.weibo.com/share/share.php?appkey=&title=Paint in VR&url=http://www.fergusfettes.com/2021/02/06/oculus-paint/&pic=http://www.fergusfettes.com/img/suka-favicon.ico&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">Share to Weibo</a>
    </li>
    

    <!-- Share Twitter -->
    
    <li class="menu-item">
        <a href="https://twitter.com/intent/tweet?text=Paint in VR&url=http://www.fergusfettes.com/2021/02/06/oculus-paint/&via=Fergus Fettes" target="_blank" rel="external noopener noreferrer nofollow">Share to Twitter</a>
    </li>
    

    <!-- Share Facebook -->
    
    <li class="menu-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.fergusfettes.com/2021/02/06/oculus-paint/" target="_blank" rel="external noopener noreferrer nofollow">Share to Facebook</a>
    </li>
    

    <!-- Share Google+ -->
    
    <li class="menu-item">
        <a href="https://plus.google.com/share?url=http://www.fergusfettes.com/2021/02/06/oculus-paint/" target="_blank" rel="external noopener noreferrer nofollow">Share to Google+</a>
    </li>
    

    <!-- Share LinkedIn -->
    
    <li class="menu-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://www.fergusfettes.com/2021/02/06/oculus-paint/&title=Fergus Fettes" target="_blank" rel="external noopener noreferrer nofollow">Share to LinkedIn</a>
    </li>
    

    <!-- Share QQ -->
    
    <li class="menu-item">
        <a href="http://connect.qq.com/widget/shareqq/index.html?site=Fergus Fettes&title=Fergus Fettes&summary=&pics=http://www.fergusfettes.com/img/suka-favicon.ico&url=http://www.fergusfettes.com/2021/02/06/oculus-paint/" target="_blank" rel="external noopener noreferrer nofollow"> Share to QQ</a>
    </li>
    

    <!-- Share Telegram -->
    
    <li class="menu-item">
        <a href="https://t.me/share/url?url=http://www.fergusfettes.com/2021/02/06/oculus-paint/&text=Fergus Fettes" target="_blank" rel="external noopener noreferrer nofollow">Share to Telegram</a>
    </li>
    

    <!-- QRCode -->
    
    <li class="menu-item">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB7UlEQVR42u2awY7DMAhE8/8/vT2tlEaGGdxdydDnS6Q6Nc8SAXvg+jlwXEABBRRQC6grGb/z9+fbIre55/zzN2UHqFlQS6d7LBgZX81n76R2gBoFFTn4apEV8Go++mAiO0B9B1TmuE7wBAqoKBFniTQKnFkABmo+lJNks0OgeyD8k1MCUMdDVS4Onzz/7TYD1FFQUnRYBElnQ9kl4mPVBaijoSKjFcd3Lg+hczsRHahWUFFSrSbjaGOuyAbULKhqQq0Yd0QRoOZBrZx7JzErUV8KcECNgHIFDMfplQCSbRqoOVCO8OWIYZlxV/AAah5UtTCdJdeK+AHULKgoeLoGVOFxtYntiA5UK6hKwHMKi05RUzo6UG2hskuBStSOcOYkfqDmQLkO7zQCugGzrLoA1QpKiWGZ+JGJFjvNg0DNglKLVgTWzNnTDwCoMVDKaeXhzLxsqP8ANQPKCYyZ0JG9r5wdqO+CqlwOKhAlcR+ollBuY2BF7C85t+peBKodlCPyOyKFapiwkjRQI6Ccxi3VeKOC7la1HajWUI6Du8JqVaC1OmKBagmlErMrqLkHPVvgAGoclCogOs0S28ETqLFQjviaHeLcxh2gZkG5TqqKluo9uwgJVGsolTSdYpBKzOVDHlBtoU4aQAEFFFC38QLvJ19u1hhUAgAAAABJRU5ErkJggg==" alt="QRCode">
    </li>
    

</ul>
</div>
        
    </div>
</div>
                </div>
                <div class="card-body">
                    
                        
                        
                            <div id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Background"><span class="post-toc-number">1.</span> <span class="post-toc-text">Background</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Getting-Started"><span class="post-toc-number">2.</span> <span class="post-toc-text">Getting Started</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Copying-Code"><span class="post-toc-number">3.</span> <span class="post-toc-text">Copying Code</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Debugging"><span class="post-toc-number">4.</span> <span class="post-toc-text">Debugging</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Progress"><span class="post-toc-number">5.</span> <span class="post-toc-text">Progress</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Archaeology"><span class="post-toc-number">6.</span> <span class="post-toc-text">Archaeology</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Frustration"><span class="post-toc-number">7.</span> <span class="post-toc-text">Frustration</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Features"><span class="post-toc-number">8.</span> <span class="post-toc-text">Features</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Further-Investigations"><span class="post-toc-number">9.</span> <span class="post-toc-text">Further Investigations</span></a></li></ol></div>
                        
                    
                    <article id="post-content">
                        <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>I bought myself a VR headset. My justification was some trailers for ‘Infinite Office’, and my love of portability– if it is true that you can have 5x screens from one laptop strapped to your head, then it’s really a gamechanger in terms of portability.</p>
<p>As it happens, I enjoy the office space (though there are still many kinks to be worked out, naturally– for instance it doesn’t support multiple screens yet on Linux), but I am not going to talk about Oculus for work right now.</p>
<p>The second thing that I bought it for, was to encourage myself to get back into JavaScript development. I consider JavasScript development to be quite unpleasant, I don’t like the tools or the workflows, but it is what so much of our life is built on, so I want to continue learning more until I am at least at a sort of journeyman-competency.</p>
<p>So here is my journey to making a small app in JavaScript-VR.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>First I went over my old JS experinements&#x2F;work, refactoring a little and refamiliarising myself with the concepts. I ran some of my old 3D geometry monstrosities, and signed up as an oculus developer.</p>
<p>The first hurdle I hit was serving my creations to the headset. WebXR only works over https. But there are built-in execptions for localhost, so I had to get the Oculus to think it was at my localhost– sounds like a job for port forwarding.</p>
<p>I started with the oculus <a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/oculus-browser/browser-remote-debugging/">chrome debugging</a> guide. I find myself using something called ‘adb’– I assume this is the android debugger. This is exciting! I’m now an adroid developer apparently.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ adb devices</span><br><span class="line">List of devices attached</span><br><span class="line">1WMHH83CNH0522  device</span><br></pre></td></tr></table></figure>

<p>I found the IP of the machine and tried to ssh in: </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ adb shell ip route</span><br><span class="line">192.168.1.0/24 dev wlan0 proto kernel scope link src 192.168.1.185</span><br><span class="line">$ ssh -fNR 1234:localhost:1234 192.168.1.185</span><br></pre></td></tr></table></figure>

<p>but to no avail. A moment or two googling later I found the command:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adb reverse tcp:1234 tcp:1234</span><br></pre></td></tr></table></figure>

<p>and we’re away! I can now open locally hosted sites on my Oculus! And I imagine I have also learned some stuff that will be useful for using my phone as a webcam or other such tricks, very excellent.</p>
<h2 id="Copying-Code"><a href="#Copying-Code" class="headerlink" title="Copying Code"></a>Copying Code</h2><p>I first try running some of the <a target="_blank" rel="noopener" href="https://threejs.org/docs/#manual/en/introduction/How-to-create-VR-content">ThreeJS examples</a> locally, then I pick <a target="_blank" rel="noopener" href="https://threejs.org/examples/#webxr_vr_paint">the one I want</a>, refactor it (I hate HTTP and JS in one document, and I tend to backup all the ThreeJS files I am using in my own src file to avoid too much dependency hell when building), and commit it to my new <a target="_blank" rel="noopener" href="https://github.com/FergusFettes/javascript-playground">javascript playground</a>.</p>
<p>Fortunately, their demo is very limited in scope. This is fortunate because I gives me something to do! It only uses two triggers for everything– you can paint, and resize your tool. I will add some buttons. To learn the correct names for the events, I’m copying <a target="_blank" rel="noopener" href="https://immersive-web.github.io/webxr-samples/controller-state.html">this example</a> from the lovely list of WebXR Samples. In fact I’ve cloned the whole repo so I can read through it.</p>
<h2 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h2><p>Reading through lots of WebXR and ThreeJS libraries, I’m still not sure how to mesh them together– specifically I can’t figure out what the button-press events are called. So I’m going back to the <a target="_blank" rel="noopener" href="https://developer.oculus.com/documentation/oculus-browser/browser-remote-debugging/">debug</a> guide to actually catch the events as they are happening.</p>
<p>So now I have chrome on my laptop debugging the session in the Oculus. Snazzy.</p>
<p>I try the Event Listener Breakpoints but no dice. Maybe its too new of a feature? Anyway I stick a breakpoint in the render loop and try to trigger it– my headset only functions when you are wearing it, so I have to have one eye in the headset and one the debugger, but eventually I manager to capture an event. I’ll eventually try to find a way to leave the headset running when I’m not wearing it.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">controller1.<span class="title function_">addEventListener</span>(<span class="string">&#x27;selectstart&#x27;</span>, <span class="function">() =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>)&#125;)</span><br></pre></td></tr></table></figure>

<p>From that captured event I get a nice log dump of all the features–</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">gamepad: Gamepad &#123;id: &quot;&quot;, index: -1, connected: true, timestamp: 734840.0999999994, mapping: &quot;xr-standard&quot;, …&#125;</span><br><span class="line">gripSpace: XRSpace &#123;&#125;</span><br><span class="line">handedness: &quot;right&quot;</span><br><span class="line">profiles: (4) [&quot;oculus-touch-v3&quot;, &quot;oculus-touch-v2&quot;, &quot;oculus-touch&quot;, &quot;generic-trigger-squeeze-thumbstick&quot;]</span><br><span class="line">targetRayMode: &quot;tracked-pointer&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>So that is something to work with!</p>
<h2 id="Progress"><a href="#Progress" class="headerlink" title="Progress"></a>Progress</h2><p>Before tryig to integrate any of the fancy stuff from the WebXR example page (fancy just meaning ‘basic graphics’, but they write all the vertices themselves so it looks a lot more than some simple ThreeJS stuff), I decided to make a quick sanity check so I can really set stuff up to work nicely. So here I am just dumping all the events from the gamepads into the console:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  session = renderer.<span class="property">xr</span>.<span class="title function_">getSession</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (session) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> source <span class="keyword">of</span> session.<span class="property">inputSources</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (source.<span class="property">gamepad</span>) &#123;</span><br><span class="line">        <span class="title class_">ProcessGamepad</span>(source.<span class="property">gamepad</span>, source.<span class="property">handedness</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleController</span>( controller1 );</span><br><span class="line">  <span class="title function_">handleController</span>( controller2 );</span><br><span class="line"></span><br><span class="line">  renderer.<span class="title function_">render</span>( scene, camera );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ProcessGamepad</span>(<span class="params">gamepad, hand, pose</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(hand)</span><br><span class="line">  <span class="title function_">update_state</span>(gamepad)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">update_state</span> (gamepad) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; gamepad.<span class="property">buttons</span>.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (gamepad.<span class="property">buttons</span>[i].<span class="property">pressed</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;button pressed: &#x27;</span> + i + <span class="string">&#x27;, value: &#x27;</span> + gamepad.<span class="property">buttons</span>[i].<span class="property">value</span> + <span class="string">&#x27;, touched: &#x27;</span> + gamepad.<span class="property">buttons</span>[i].<span class="property">touched</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; gamepad.<span class="property">axes</span>.<span class="property">length</span>; i+=<span class="number">2</span>, ++j) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(gamepad.<span class="property">axes</span>[i], i + <span class="number">1</span> &lt; gamepad.<span class="property">axes</span>.<span class="property">length</span> ? gamepad.<span class="property">axes</span>[i + <span class="number">1</span>] : <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>I start it up and it works! My Oculus controller has buttons 0, 1, 4 and 5, and 3 is the joystick click. I assume 2 is reseved for the oculus button on the right controller, though maybe I can use it on the left one. It also has sensitive axes on buttons 0 and 1, and the joystick. Plus position information! A veritable wealth of possibilities.</p>
<p>I’ll continue with this tomorrow.</p>
<h2 id="Archaeology"><a href="#Archaeology" class="headerlink" title="Archaeology"></a>Archaeology</h2><p>I spent an age trying to add colors to the TubePainter module. I got very confused by it because I couldn’t believe that they hadn’t added the functionality to change the color, but I guess the project is really a stub.</p>
<p>In fact the more I look into VR development the puzzles I am spotting. I looks like there was a major boom in VR about five years ago, most of the libraries I’m working with were started back then. But then they seem to have somewhat petered out. Maybe we are currently in a little VR-winter, as the initial hype overshot all reality. Maybe we are heading into a thaw now. Lets see.</p>
<p>Furthermore, notes after a day or two of regular Oculus useage– it definitely takes a toll on the eyes. Everything has a somewhat hallucinagenic quality when you come out of it, like an acid comedown. I’m not sure if this effect will diminish or grow with continued usage. I can see it being very problematic for people who suffer from <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Hallucinogen_persisting_perception_disorder#:~:text=Hallucinogen%20persisting%20perception%20disorder%20(HPPD,of%20mental%20intoxication%20experienced%20before.">HPPD</a>.</p>
<p>Or maybe all the Oculus Developers are elsewhere, working with the Unreal Engine or Unity or someeuch. Maybe ThreeJS isn’t cool. But I must say I am impressed by how much this thing can run, I spend 20 minutes filling my vision with layer upon layer of multicoloured swirls, without noticing any drop in quality or responsivness.</p>
<p>The next part I have to integrate is the VR answer to the <a target="_blank" rel="noopener" href="https://github.com/dataarts/dat.guiVR">dat-gui</a> library. Also made 4 years ago.</p>
<h2 id="Frustration"><a href="#Frustration" class="headerlink" title="Frustration"></a>Frustration</h2><p>Once again I am reminded of how much I hate the JS workflow. I need to improve this somehow. With the Oculus it is particularly bad– make a change, serve the change, pick up headset, wait for it to start up, then when it is runnign start up the debugger with a keyboard shortcut, then take it off and do some debugging. Repeat.</p>
<p>I will eventually work on a better workflow by integrating <a target="_blank" rel="noopener" href="https://github.com/brianpeiris/RiftSketch">RiftSketch</a>. That will be a joy I think, if I can code and manipulate objects all in VR. That is the goal.</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>So after an age of fiddling with GUIs I gave up for the moment and satisfied myself with two new features:</p>
<ul>
<li>random color generation</li>
<li>(with or without changing the color of your little cloud of cubes)</li>
<li>buffer deletion (specific to each hand, so you can delete work in one hand only)</li>
</ul>
<p>Obviously both of these things can be much upgraded, a C-z feature and better color choosing. But I think it is enough to have some fun with just now so I will push it to github so I can use it untethered. I’ll make it available at paint.fergusfettes.com.</p>
<h2 id="Further-Investigations"><a href="#Further-Investigations" class="headerlink" title="Further Investigations"></a>Further Investigations</h2><p>So I played with RiftSketch. It is wonderful. It just needs a propery editor. I had a look around the internet (even asked on <a target="_blank" rel="noopener" href="https://www.reddit.com/r/vim/comments/lfpefb/implementing_vim_inside_threejs/">reddit</a>) then found <a target="_blank" rel="noopener" href="https://coolwanglu.github.io/vim.js/streamlinejs/vim.html">what I needed</a>. In the process I stumled across some other stuff that might come in useful. At the end of the day what I need is this:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://coolwanglu.github.io/vim.js/streamlinejs/vim.html">Vim Javascript Implimentation</a> for my editor</li>
<li><a target="_blank" rel="noopener" href="https://github.com/brianpeiris/RiftSketch">RiftSketch</a> for the framework</li>
<li><a target="_blank" rel="noopener" href="https://threejs.org/editor/">ThreeJS Editor</a> tools stolen from here. Actually maybe I can just skip RiftSketch and add Vim and a VRButton directly to that. But I would feel bad if I left RiftSketch behind.</li>
</ul>
<p>All of this mixed with my paint program of course! It’s going to be mental.</p>
<p>In all seriousness, in the short term, if I can integrate that JS Vim implementation into RiftSketch I will be a happy man.</p>
<p>This process is teaching me a great deal about JavaScript. That should go without saying. In the last hour I learned:</p>
<ul>
<li>how to use prettier and eslint to lint my stuff</li>
<li>how to reverse engineer files from .maps</li>
<li>more about building&#x2F;packaing etc (still trying to use parcel for everything since it is nice and minimal)</li>
</ul>

                    </article>
                    


    <blockquote id="date-expire-notification" class="post-expired-notify">This article was last updated on <span id="date-expire-num"></span> days ago, and the information described in the article may have changed.</blockquote>
    <script>
    (function() {
        var dateUpdate = Date.parse("2022-10-15");
        var nowDate = new Date();
        var a = nowDate.getTime();
        var b = a - dateUpdate;
        var daysUpdateExpire = Math.floor(b/(24*3600*1000));
        if (daysUpdateExpire >= 120) {
            document.getElementById('date-expire-num').innerHTML = daysUpdateExpire;
        } else {
            document.getElementById('date-expire-notification').style.display = 'none';
        }
    })();
    </script>


<p class="post-footer-info mb-0 pt-0">Published at&nbsp;<time datetime="2021-02-06T22:10:29.000Z" itemprop="datePublished">2021-02-06</time>

    , Updated at&nbsp;<time datetime="2022-10-15T22:17:08.288Z" itemprop="dateModified">2022-10-15</time>

</p>
<p class="post-footer-info mb-0 pt-2">




</p>

                </div>
                <div class="post-nav px-2 bg-gray">
<ul class="pagination">
    <!-- Prev Nav -->
    
        <li class="page-item page-prev">
            <a href="/2022/10/18/hello-world/" rel="prev">
                <div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">Homepage of Fergus Fettes</div>
            </a>
        </li>
    

    <!-- Next Nav -->
    
        <li class="page-item page-next">
            <a href="/2021/02/06/oculus-streaming/" rel="next">
                <div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">Streaming Oculus</div>
            </a>
        </li>
    
</ul>
</div>

                
                    <!-- # Comment # -->
                    
                
            </div>
        </div>
    </div>
</div>

            <!-- ### Footer ### -->
            <footer class="text-center">
    <!-- footer copyright -->
    
        <p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span id="copyright-year"></span>
            <a class="footer-copyright-a" href="http://www.fergusfettes.com">Fergus Fettes</a>
        </p>

    <!-- footer custom text -->
    <p class="footer-text mb-0">
    
    </p>
    <!-- footer develop info -->
    <p class="footer-develop mb-0">
        
    <!-- Busuanzi User Views -->
    <span id="busuanzi_container_site_uv" hidden>
        <span></span>
        <span id="busuanzi_value_site_uv"></span>
        <span>Viewers</span>
        
            <span>|</span>
        
    </span>




        
        Powered by&nbsp;<!--
         --><a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<!--
         --><a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a>
    </p>
</footer>


        <!-- ### Import File ### -->
        <!-- ### Footer JS Import ### -->

<script>

    
window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
};
document.getElementById('copyright-year').textContent = new Date().getFullYear();
console.log('\n %c Suka Theme (hexo-theme-suka) | © SukkaW | Verision 1.3.3 %c https://github.com/SukkaW/hexo-theme-suka \n', 'color: #fff; background: #444; padding:5px 0;', 'background: #bbb; padding:5px 0;');

</script>

<script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" async></script>


<!-- Offset -->




<!-- Comment -->


<!-- ### Custom Footer ### -->

    </body>

</html>